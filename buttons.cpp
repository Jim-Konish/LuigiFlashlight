////////////////////////////////////////////////////////////////////////////////
//!
//! @addtogroup       doxygen_group
//! @{
//!
//! @file             buttons.c
//!
//! @author           Jim Konish
//!
//! @date             10/31/2021
//!
//! @brief            Button module
//!
//! @details          
//!
//! @copyright        2021 Jim Konish                    
//!
////////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////
//  Includes
///////////////////////////////////////////////////////////////////////////////

#include "buttons.h"  // Interface to this file

#include "arduino.h"

///////////////////////////////////////////////////////////////////////////////
//  Private Macros
///////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////
//  Private Types
///////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////
//  Private Function Prototypes
///////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////
//  Public Data
///////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////
//  Private Data
///////////////////////////////////////////////////////////////////////////////

int buttonPins[] = 
{
    2,  // BUTTON_BLUE
    3,  // BUTTON_WHITE
    4,  // BUTTON_GREEN
};

///////////////////////////////////////////////////////////////////////////////
//  Public Function Implementations
///////////////////////////////////////////////////////////////////////////////

void initButtons(void)
{
    pinMode(2, INPUT_PULLUP);
    pinMode(3, INPUT_PULLUP);
    pinMode(4, INPUT_PULLUP);
}

buttonId_t getButton(void)
{
    for(int button = 0; button < NUM_BUTTONS; button++)
    {
        if(digitalRead(buttonPins[button]) == LOW)
        {
            // This one was pressed, don't bother with the rest
            return (buttonId_t)button;
        }
    }

    return BUTTON_NONE;
}

///////////////////////////////////////////////////////////////////////////////
//  Private Function Implementations
///////////////////////////////////////////////////////////////////////////////



//! @}  end of doxygen group
